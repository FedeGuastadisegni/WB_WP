<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">﻿
		<meta name="viewport" content="width=device-width, initial-scale=1">
  		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  		<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
		<title> JSON con Jquery</title>
	</head>

	<body>

		<ul id="myTab"class="nav nav-tabs">
  			<li><a data-toggle="tab" href="#todo">Todo!</a></li>
  			<li><a data-toggle="tab" href="#busquedaId">Busqueda por ID</a></li>
  			<li><a data-toggle="tab" href="#menu2">Menu 2</a></li>
		</ul>

		<div id="myTabContent" class="tab-content">
  			<div id="todo" class="tab-pane fade">
  				<button id="botonTodo" class="btn btn-success">Traer todo</button>
  				<!--<button id="botonTodoClear" class="btn btn-danger">Clear</button>-->
  				<div id="resultadoTodo"></div>
  			</div>

  			<div id="busquedaId" class="tab-pane fade">
    			<div class="col-lg-6">
    				<div class="input-group" buscar>
            			<input type="text" class="form-control" id="query" placeholder="Ingrese la búsqueda...">
                <span class="input-group-btn">
                    <button id="botonId" type="button" class="btn btn-success">Search</button>
                    <!--<button id="botonIdClear" type="button" class="btn btn-danger">Clear</button>-->
                </span>
            		</div>
  				</div>
  				<div id="resultadosID"></div>
  			</div>
  			
  			<div id="menu2" class="tab-pane fade">
    			<h3>Menu 2</h3>
    			<p>Some content in menu 2.</p>
  			</div>
		</div>

		<script>

		$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) { //Cuando cambio de Tab..
  			$('#resultadoTodo').empty();
  			$('#resultadosID').empty();
		});

		$('#botonTodo').on('click',function(e){
			$('#resultadoTodo').empty();
			var url = 'http://localhost/api/get/list/'
			$.getJSON(url,function(data){
				$(data.docs).each(function(index,value){
							$('#resultadoTodo').append($('<br><br>'));
							$('#resultadoTodo').append($('<div>' + "ID: " + value.id +'</div>'));
            				$('#resultadoTodo').append($('<div>' + "Autor: " + value.Autor + '</div>'));
            				$('#resultadoTodo').append($('<div>' + "Titulo: " + value.Titulo + '</div>'));
            				$('#resultadoTodo').append($('<div>' + "Año: "+ value.Anio + '</div>'));
            				$('#resultadoTodo').append($('<div>' + "URL: "+ value.URL + '</div>'));
            				$('#resultadoTodo').append($('<p>' + " "+value.ISBN + '</p>'));
				});
			});
		});

		/*$('#botonIdClear').on('click',function(e){
			$('#resultadosID').empty();
		});

		$('#botonTodoClear').on('click',function(e){
			$('#resultadoTodo').empty();
		});*/

		$('#botonId').on('click',function(on_search){
		var query = $('#query').val();
        if (query.length == 0) {
            return;
        }
    	var url = 'http://localhost/api/get/id='+query+'/';
    	$.getJSON(url,function(data){
    		$(data.docs).each(function(index,value){
    						$('#resultadosID').empty();
    						$('#resultadosID').append($('<br><br>'));
							$('#resultadosID').append($('<div>' + "ID: " + value.id +'</div>'));
            				$('#resultadosID').append($('<div>' + "Autor: " + value.Autor + '</div>'));
            				$('#resultadosID').append($('<div>' + "Titulo: " + value.Titulo + '</div>'));
            				$('#resultadosID').append($('<div>' + "Año: "+ value.Anio + '</div>'));
            				//$('#todo').append($('<iframe src="'+value.url+'">'+'</iframe>'));
            				$('<iframe/>'); //Creo el elemento "iframe"...
                    		$('<iframe/>', {
                        			name: 'frame1',
                        			id: 'frame1',
                        			src: value.URL
                    		}).appendTo('#resultadosID');
            				$('#resultadosID').append($('<p>' + " "+value.ISBN + '</p>'));
					});
			});	
		});
			
      
</script>
	</body>


</html>